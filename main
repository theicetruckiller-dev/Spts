local p=game:GetService("Players").LocalPlayer
local vim=game:GetService("VirtualInputManager")
local RunService=game:GetService("RunService")

-- GUI
local gui=Instance.new("ScreenGui",p:WaitForChild("PlayerGui"))
gui.Name="SPTSAutoClicker"
gui.ResetOnSpawn=false

local panel=Instance.new("Frame",gui)
panel.BackgroundColor3=Color3.fromRGB(25,25,25)
panel.Size=UDim2.new(0,300,0,270)
panel.Position=UDim2.new(0.05,0,0.55,0)
panel.Active=true
panel.Draggable=true
Instance.new("UICorner",panel).CornerRadius=UDim.new(0,12)

-- Toggle butonu
local toggleBtn=Instance.new("TextButton",gui)
toggleBtn.Size=UDim2.new(0,50,0,50)
toggleBtn.Position=UDim2.new(0.01,0,0.5,0)
toggleBtn.BackgroundColor3=Color3.fromRGB(40,40,40)
toggleBtn.Text="👁️"
toggleBtn.TextColor3=Color3.fromRGB(230,230,230)
toggleBtn.Font=Enum.Font.GothamBold
toggleBtn.TextSize=26
toggleBtn.Active=true
toggleBtn.Draggable=true
Instance.new("UICorner",toggleBtn).CornerRadius=UDim.new(1,0)

local panelVisible=true
toggleBtn.MouseButton1Click:Connect(function()
 panelVisible=not panelVisible
 panel.Visible=panelVisible
 toggleBtn.Text=panelVisible and "👁️" or "❌"
end)

-- Başlık
local title=Instance.new("TextLabel",panel)
title.Text="⚡ SPTS Auto"
title.Size=UDim2.new(1,0,0,28)
title.BackgroundTransparency=1
title.TextColor3=Color3.fromRGB(230,230,230)
title.Font=Enum.Font.GothamBold
title.TextSize=18

-- Clicker Butonu
local clickerBtn=Instance.new("TextButton",panel)
clickerBtn.Size=UDim2.new(0,120,0,32)
clickerBtn.Position=UDim2.new(0,10,0,40)
clickerBtn.BackgroundColor3=Color3.fromRGB(40,180,100)
clickerBtn.Text="Clicker: Kapalı"
clickerBtn.TextColor3=Color3.fromRGB(240,240,240)
clickerBtn.Font=Enum.Font.GothamBold
clickerBtn.TextSize=14
Instance.new("UICorner",clickerBtn).CornerRadius=UDim.new(0,8)

-- Slot kutusu
local slotBox=Instance.new("TextBox",panel)
slotBox.Size=UDim2.new(0,60,0,26)
slotBox.Position=UDim2.new(0,150,0,42)
slotBox.BackgroundColor3=Color3.fromRGB(40,40,40)
slotBox.Text="1"
slotBox.TextColor3=Color3.fromRGB(220,220,220)
slotBox.Font=Enum.Font.Gotham
slotBox.TextSize=14
slotBox.ClearTextOnFocus=false
Instance.new("UICorner",slotBox).CornerRadius=UDim.new(0,6)

-- Slot Label
local slotLabel=Instance.new("TextLabel",panel)
slotLabel.Text="Slot (1-4)"
slotLabel.Size=UDim2.new(0,80,0,20)
slotLabel.Position=UDim2.new(0,150,0,70)
slotLabel.BackgroundTransparency=1
slotLabel.TextColor3=Color3.fromRGB(200,200,200)
slotLabel.Font=Enum.Font.Gotham
slotLabel.TextSize=13

-- Hız textbox
local speedBox=Instance.new("TextBox",panel)
speedBox.Size=UDim2.new(0,60,0,26)
speedBox.Position=UDim2.new(0,10,0,90)
speedBox.BackgroundColor3=Color3.fromRGB(40,40,40)
speedBox.Text="100"
speedBox.TextColor3=Color3.fromRGB(220,220,220)
speedBox.Font=Enum.Font.Gotham
speedBox.TextSize=14
speedBox.ClearTextOnFocus=false
Instance.new("UICorner",speedBox).CornerRadius=UDim.new(0,6)

-- Hız butonları
local speeds={["Hızlı"]=50,["Orta"]=100,["Yavaş"]=300}
local xPos=100
local currentSpeed=100
for n,s in pairs(speeds)do
 local b=Instance.new("TextButton",panel)
 b.Size=UDim2.new(0,60,0,26)
 b.Position=UDim2.new(0,xPos,0,90)
 b.BackgroundColor3=Color3.fromRGB(70,70,70)
 b.TextColor3=Color3.fromRGB(230,230,230)
 b.Font=Enum.Font.GothamBold
 b.TextSize=13
 b.Text=n
 Instance.new("UICorner",b).CornerRadius=UDim.new(0,6)
 b.MouseButton1Click:Connect(function() currentSpeed=s speedBox.Text=tostring(s) end)
 xPos=xPos+70
end

-- Infinite Jump
local jumpBtn=Instance.new("TextButton",panel)
jumpBtn.Size=UDim2.new(0,250,0,30)
jumpBtn.Position=UDim2.new(0,10,0,150)
jumpBtn.BackgroundColor3=Color3.fromRGB(80,70,180)
jumpBtn.Text="Infinite Jump: Kapalı"
jumpBtn.TextColor3=Color3.fromRGB(240,240,255)
jumpBtn.Font=Enum.Font.GothamBold
jumpBtn.TextSize=14
Instance.new("UICorner",jumpBtn).CornerRadius=UDim.new(0,8)

-- Havuz GUI
local pools={
 Vector3.new(366,250,-446),
 Vector3.new(348,264,-499),
 Vector3.new(1639,260,2250),
 Vector3.new(-2303,977,1072),
 Vector3.new(-2051,714,-1893)
}
local poolLabel=Instance.new("TextLabel",panel)
poolLabel.Text="Havuz Seç (1-5)"
poolLabel.Size=UDim2.new(0,120,0,20)
poolLabel.Position=UDim2.new(0,10,0,190)
poolLabel.BackgroundTransparency=1
poolLabel.TextColor3=Color3.fromRGB(200,200,200)
poolLabel.Font=Enum.Font.Gotham
poolLabel.TextSize=13

local poolBox=Instance.new("TextBox",panel)
poolBox.Size=UDim2.new(0,60,0,26)
poolBox.Position=UDim2.new(0,130,0,188)
poolBox.BackgroundColor3=Color3.fromRGB(40,40,40)
poolBox.Text="1"
poolBox.TextColor3=Color3.fromRGB(220,220,220)
poolBox.Font=Enum.Font.Gotham
poolBox.TextSize=14
poolBox.ClearTextOnFocus=false
Instance.new("UICorner",poolBox).CornerRadius=UDim.new(0,6)

local autoPoolBtn=Instance.new("TextButton",panel)
autoPoolBtn.Size=UDim2.new(0,150,0,28)
autoPoolBtn.Position=UDim2.new(0,10,0,220)
autoPoolBtn.BackgroundColor3=Color3.fromRGB(200,120,50)
autoPoolBtn.Text="Auto Havuz: Kapalı"
autoPoolBtn.TextColor3=Color3.fromRGB(240,240,240)
autoPoolBtn.Font=Enum.Font.GothamBold
autoPoolBtn.TextSize=14
Instance.new("UICorner",autoPoolBtn).CornerRadius=UDim.new(0,8)

-- Vars
local running=false
local infiniteJump=false
local autoPool=false

clickerBtn.MouseButton1Click:Connect(function()
 running=not running
 clickerBtn.Text=running and "Clicker: Açık" or "Clicker: Kapalı"
 clickerBtn.BackgroundColor3=running and Color3.fromRGB(200,80,80) or Color3.fromRGB(40,180,100)
end)

jumpBtn.MouseButton1Click:Connect(function()
 infiniteJump=not infiniteJump
 jumpBtn.Text=infiniteJump and "Infinite Jump: Açık" or "Infinite Jump: Kapalı"
end)

autoPoolBtn.MouseButton1Click:Connect(function()
 autoPool=not autoPool
 autoPoolBtn.Text=autoPool and "Auto Havuz: Açık" or "Auto Havuz: Kapalı"
end)

-- Auto click loop
task.spawn(function()
 while true do
  if running then
   local spd=tonumber(speedBox.Text)or currentSpeed
   local x=workspace.CurrentCamera.ViewportSize.X/2
   local y=workspace.CurrentCamera.ViewportSize.Y/2
   vim:SendMouseButtonEvent(x,y,0,true,game,1)
   vim:SendMouseButtonEvent(x,y,0,false,game,1)
   task.wait(math.max(spd/1000,0.01))
  else task.wait(0.1)end
 end
end)

-- Infinite jump
local lastJump=tick()
RunService.RenderStepped:Connect(function()
 if infiniteJump then
  local char=p.Character
  if char and char:FindFirstChildOfClass("Humanoid") then
   local hum=char:FindFirstChildOfClass("Humanoid")
   if hum:GetState()==Enum.HumanoidStateType.Landed then
    if tick()-lastJump>0.08 then
     hum:ChangeState(Enum.HumanoidStateType.Jumping)
     lastJump=tick()
    end
   end
  end
 end
end)

-- Auto Havuz / Spawn sonrası ışınlama (önceki kod bozulmadı)
local function startAutoPool(char)
    task.spawn(function()
        while autoPool and char and char:FindFirstChild("HumanoidRootPart") do
            local poolNum = tonumber(poolBox.Text) or 1
            poolNum = math.clamp(poolNum,1,#pools)
            -- Önceki scriptin birebir havuz ışınlama kodu
            char.HumanoidRootPart.CFrame = CFrame.new(pools[poolNum])
            task.wait(1)
        end
    end)
end

-- Karakter spawn sonrası tetikleme
p.CharacterAdded:Connect(function(char)
    char:WaitForChild("HumanoidRootPart")
    if autoPool then startAutoPool(char) end
end)

-- Mevcut karakter varsa başlat
if p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
    startAutoPool(p.Character)
end
