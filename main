--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local camera = workspace.CurrentCamera
local player = Players.LocalPlayer

--// GUI ROOT
local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.Name = "SPTSAuto"
gui.ResetOnSpawn = false

--// PANEL
local panel = Instance.new("Frame", gui)
panel.Size = UDim2.new(0, 320, 0, 300)
panel.Position = UDim2.new(0.05, 0, 0.5, 0)
panel.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
panel.Active = true
panel.Draggable = true
Instance.new("UICorner", panel).CornerRadius = UDim.new(0, 12)
local UIListLayout = Instance.new("UIListLayout", panel)
UIListLayout.Padding = UDim.new(0, 5)

--// TITLE
local title = Instance.new("TextLabel", panel)
title.Text = "âš¡ SPTS Auto (by Zwac)"
title.Size = UDim2.new(1, 0, 0, 28)
title.Position = UDim2.new(0, 0, 0, 2)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(230, 230, 230)
title.Font = Enum.Font.GothamBold
title.TextSize = 18

--// BUTTONS
local clickerBtn = Instance.new("TextButton", panel)
clickerBtn.Size = UDim2.new(1, -10, 0, 40)
clickerBtn.Position = UDim2.new(0, 5, 0, 40)
clickerBtn.Text = "âš¡ Auto Clicker: KapalÄ±"
clickerBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
Instance.new("UICorner", clickerBtn).CornerRadius = UDim.new(0, 8)

local poolBtn = Instance.new("TextButton", panel)
poolBtn.Size = UDim2.new(1, -10, 0, 40)
poolBtn.Position = UDim2.new(0, 5, 0, 90)
poolBtn.Text = "ğŸŠ Auto Pool: KapalÄ±"
poolBtn.BackgroundColor3 = Color3.fromRGB(200, 120, 50)
Instance.new("UICorner", poolBtn).CornerRadius = UDim.new(0, 8)

local jumpBtn = Instance.new("TextButton", panel)
jumpBtn.Size = UDim2.new(1, -10, 0, 40)
jumpBtn.Position = UDim2.new(0, 5, 0, 140)
jumpBtn.Text = "ğŸŸ¦ Infinite Jump: KapalÄ±"
jumpBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 200)
Instance.new("UICorner", jumpBtn).CornerRadius = UDim.new(0, 8)

--// SPEED BOX
local speedBox = Instance.new("TextBox", panel)
speedBox.Size = UDim2.new(0, 60, 0, 26)
speedBox.Position = UDim2.new(0, 10, 0, 190)
speedBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
speedBox.Text = "100"
speedBox.TextColor3 = Color3.fromRGB(220, 220, 220)
speedBox.Font = Enum.Font.Gotham
speedBox.TextSize = 14
speedBox.ClearTextOnFocus = false
Instance.new("UICorner", speedBox).CornerRadius = UDim.new(0, 6)

--// POOLS
local pools = {
	Vector3.new(366,250,-446),
	Vector3.new(348,264,-499),
	Vector3.new(1639,260,2250),
	Vector3.new(-2303,977,1072),
	Vector3.new(-2051,714,-1893)
}
local selectedPool = 1
local poolBtns = {}
for i = 1, #pools do
	local b = Instance.new("TextButton", panel)
	b.Size = UDim2.new(0, 50, 0, 26)
	b.Position = UDim2.new(0, 10 + 60*(i-1), 0, 220)
	b.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
	b.TextColor3 = i == 1 and Color3.fromRGB(100,170,255) or Color3.fromRGB(230,230,230)
	b.Font = Enum.Font.GothamBold
	b.TextSize = 14
	b.Text = "Pool "..i
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,6)
	b.MouseButton1Click:Connect(function()
		selectedPool = i
		for j,btn in ipairs(poolBtns) do
			btn.TextColor3 = j == i and Color3.fromRGB(100,170,255) or Color3.fromRGB(230,230,230)
		end
	end)
	table.insert(poolBtns, b)
end

--// STATE VARS
local runningClicker = false
local runningPool = false
local infiniteJump = false
local hasTeleported = false
local lastPos = nil

--// SPAWN POSITION FOR AUTO CLICKER
local function getSpawnPos()
	local vps = camera.ViewportSize
	local x = vps.X/2
	local y = vps.Y/2 + 200 -- spawn butonuna denk gelecek ÅŸekilde
	return Vector2.new(x,y)
end

--// AUTO CLICKER
task.spawn(function()
	while true do
		if runningClicker then
			local pos = getSpawnPos()
			VirtualInputManager:SendMouseButtonEvent(pos.X,pos.Y,0,true,game,1)
			VirtualInputManager:SendMouseButtonEvent(pos.X,pos.Y,0,false,game,1)
			local spd = tonumber(speedBox.Text) or 100
			task.wait(math.max(spd/1000,0.01))
		else
			task.wait(0.05)
		end
	end
end)

--// AUTO POOL TELEPORT
local function doTeleport()
	local char = player.Character
	if char and char:FindFirstChild("HumanoidRootPart") and runningPool then
		char.HumanoidRootPart.CFrame = CFrame.new(pools[selectedPool])
		hasTeleported = true
	end
end

RunService.RenderStepped:Connect(function()
	local char = player.Character
	if char and char:FindFirstChild("HumanoidRootPart") and runningPool then
		local pos = char.HumanoidRootPart.Position
		if lastPos and (pos-lastPos).Magnitude>1 then hasTeleported=false end
		lastPos = pos
	end
end)

task.spawn(function()
	while true do
		if runningPool and not hasTeleported then doTeleport() end
		task.wait(0.4)
	end
end)

--// INFINITE JUMP
UserInputService.JumpRequest:Connect(function()
	if infiniteJump then
		local char = player.Character
		if char then
			local hum = char:FindFirstChildOfClass("Humanoid")
			if hum then
				hum:ChangeState(Enum.HumanoidStateType.Jumping)
			end
		end
	end
end)

--// BUTTON FUNCTIONS
clickerBtn.MouseButton1Click:Connect(function()
	runningClicker = not runningClicker
	clickerBtn.Text = runningClicker and "âš¡ Auto Clicker: AÃ§Ä±k" or "âš¡ Auto Clicker: KapalÄ±"
	clickerBtn.BackgroundColor3 = runningClicker and Color3.fromRGB(50,200,50) or Color3.fromRGB(200,50,50)
end)

poolBtn.MouseButton1Click:Connect(function()
	runningPool = not runningPool
	poolBtn.Text = runningPool and "ğŸŠ Auto Pool: AÃ§Ä±k" or "ğŸŠ Auto Pool: KapalÄ±"
	poolBtn.BackgroundColor3 = runningPool and Color3.fromRGB(50,200,200) or Color3.fromRGB(200,120,50)
	hasTeleported=false
end)

jumpBtn.MouseButton1Click:Connect(function()
	infiniteJump = not infiniteJump
	jumpBtn.Text = infiniteJump and "ğŸŸ¦ Infinite Jump: AÃ§Ä±k" or "ğŸŸ¦ Infinite Jump: KapalÄ±"
	jumpBtn.BackgroundColor3 = infiniteJump and Color3.fromRGB(50,150,250) or Color3.fromRGB(80,80,200)
end)

--// DEATH / RESPAWN HANDLING
local function setupDeathHandler()
	local function connectDied()
		local char = player.Character
		if char then
			local hum = char:FindFirstChildOfClass("Humanoid")
			if hum then
				hum.Died:Connect(function()
					hasTeleported = false
					task.wait(1)
					player.CharacterAdded:Wait()
					task.wait(0.5)
					doTeleport()
				end)
			end
		end
	end
	player.CharacterAdded:Connect(function() task.wait(0.5); connectDied() end)
	connectDied()
end
setupDeathHandler()
