-- SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- STATE VARS
local running = false
local infiniteJump = false
local autoPool = false
local autoStrength = false
local autoPsychic = false
local hasTeleported = false
local hasTeleStrengthTeleported = false
local lastPos = nil
local clickPosition = Vector2.new(401, 270)
local selectedPool = "1. 100"
local selectedStrength = Vector3.new(403, 249, 988)
local selectedPsychic = "1M"
local momentorespawn = false

-- TELEPORT LOCATIONS
local teleportLocations = {
    ["Quest"] = Vector3.new(489, 249, 895),
    ["Leaderboard"] = Vector3.new(-750, 249, 747)
}

-- POOLS
local pools = {
    ["1. 100"] = Vector3.new(366, 250, -446),
    ["2. 10k"] = Vector3.new(348, 264, -499),
    ["3. 100k"] = Vector3.new(1639, 260, 2250),
    ["4. 1m"] = Vector3.new(-2303, 977, 1072),
    ["5. 10m"] = Vector3.new(-2051, 714, -1893)
}

-- STRENGTH LOCATIONS
local strengthLocations = {
    ["Normal Taş"] = Vector3.new(403, 249, 988),
    ["Mavi Kristal"] = Vector3.new(-2275, 1943, 1051)
}

-- PSYCHIC POSITIONS
local psychicLocations = {
    ["1M"] = Vector3.new(-2531, 5486, -533),
    ["1B"] = Vector3.new(-2562, 5501, -435),
    ["1T"] = Vector3.new(-2582, 5516, -503),
    ["1Qa"] = Vector3.new(-2544, 5412, -494)
}

-- GUI ROOT
local gui = Instance.new("ScreenGui")
gui.Name = "SPTSAuto"
gui.ResetOnSpawn = false
gui.Parent = PlayerGui

-- PANEL
local panel = Instance.new("Frame", gui)
panel.Size = UDim2.new(0,400,0,450)
panel.Position = UDim2.new(0.3,0,0.3,0)
panel.BackgroundColor3 = Color3.fromRGB(25,25,25)
panel.Active = true
panel.Draggable = true
Instance.new("UICorner", panel).CornerRadius = UDim.new(0,12)

-- TITLE
local title = Instance.new("TextLabel", panel)
title.Text = "⚡ SPTS Auto (By Zwac)"
title.Size = UDim2.new(1,0,0,28)
title.Position = UDim2.new(0,0,0,2)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(230,230,230)
title.Font = Enum.Font.GothamBold
title.TextSize = 18

-- MINI BUTTON
local miniBtn = Instance.new("TextButton", gui)
miniBtn.Size = UDim2.new(0,40,0,40)
miniBtn.Position = UDim2.new(0,10,0,200)
miniBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
miniBtn.Text = "☰"
miniBtn.TextColor3 = Color3.fromRGB(230,230,230)
miniBtn.Font = Enum.Font.GothamBold
miniBtn.TextSize = 20
miniBtn.Visible = false
miniBtn.Active = true
miniBtn.Draggable = true
Instance.new("UICorner", miniBtn).CornerRadius = UDim.new(1,0)
miniBtn.MouseButton1Click:Connect(function()
    panel.Visible = true
    miniBtn.Visible = false
end)

-- TOGGLE BUTTON
local toggleBtn = Instance.new("TextButton", panel)
toggleBtn.Size = UDim2.new(0,50,0,50)
toggleBtn.Position = UDim2.new(1,-60,0,2)
toggleBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
toggleBtn.Text = "❌"
toggleBtn.TextColor3 = Color3.fromRGB(230,230,230)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 26
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(1,0)
toggleBtn.MouseButton1Click:Connect(function()
    panel.Visible = false
    miniBtn.Visible = true
end)

-- CATEGORY BUTTONS
local categories = {"Teleports","Farms","Misc"}
local catFrames = {}
for i,cat in ipairs(categories) do
    local btn = Instance.new("TextButton", panel)
    btn.Size = UDim2.new(0,100,0,28)
    btn.Position = UDim2.new(0,10,0,40 + (i-1)*32)
    btn.BackgroundColor3 = Color3.fromRGB(60,60,60)
    btn.Text = cat
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)

    local frame = Instance.new("Frame", panel)
    frame.Size = UDim2.new(1,-120,1,-50)
    frame.Position = UDim2.new(0,120,0,40)
    frame.BackgroundTransparency = 1
    frame.Visible = i==1
    catFrames[cat] = frame

    btn.MouseButton1Click:Connect(function()
        for _,f in pairs(catFrames) do f.Visible = false end
        frame.Visible = true
    end)
end

-- MISC FRAME (Infinite Jump)
local miscFrame = catFrames["Misc"]
local infiniteBtn = Instance.new("TextButton", miscFrame)
infiniteBtn.Size = UDim2.new(0,180,0,28)
infiniteBtn.Position = UDim2.new(0,10,0,10)
infiniteBtn.BackgroundColor3 = Color3.fromRGB(50,150,50)
infiniteBtn.TextColor3 = Color3.fromRGB(240,240,240)
infiniteBtn.Font = Enum.Font.GothamBold
infiniteBtn.TextSize = 14
infiniteBtn.Text = "Sonsuz Zıplama: Kapalı"
Instance.new("UICorner", infiniteBtn).CornerRadius = UDim.new(0,6)

-- Toggle Infinite Jump
infiniteBtn.MouseButton1Click:Connect(function()
    infiniteJump = not infiniteJump
    infiniteBtn.Text = infiniteJump and "Sonsuz Zıplama: Açık" or "Sonsuz Zıplama: Kapalı"
    infiniteBtn.BackgroundColor3 = infiniteJump and Color3.fromRGB(27,94,32) or Color3.fromRGB(50,150,50)
end)

-- Draggable Infinite Button
local dragging, dragInput, dragStart, startPos
infiniteBtn.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = infiniteBtn.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

infiniteBtn.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart
        infiniteBtn.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

-- INFINITE JUMP HANDLER
UserInputService.JumpRequest:Connect(function()
    if infiniteJump then
        local char = Player.Character
        if char and char:FindFirstChildOfClass("Humanoid") then
            char.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
end)

RunService.RenderStepped:Connect(function()
    if infiniteJump then
        local char = Player.Character
        if char then
            local humanoid = char:FindFirstChildOfClass("Humanoid")
            if humanoid then
                local state = humanoid:GetState()
                if state ~= Enum.HumanoidStateType.Freefall and state ~= Enum.HumanoidStateType.Seated and humanoid.FloorMaterial ~= Enum.Material.Air then
                    humanoid.Jump = true
                end
            end
        end
    end
end)
-- TELEPORTS FRAME
local teleportFrame = catFrames["Teleports"]
local tpY = 10
for name,pos in pairs(teleportLocations) do
    local btn = Instance.new("TextButton", teleportFrame)
    btn.Size = UDim2.new(0,200,0,28)
    btn.Position = UDim2.new(0,10,0,tpY)
    btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Text = name
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
    btn.MouseButton1Click:Connect(function()
        local char = Player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            char.HumanoidRootPart.CFrame = CFrame.new(pos)
        end
    end)
    tpY = tpY + 36
end

-- FARMS FRAME
local farmsFrame = catFrames["Farms"]

-- Auto Pool Toggle
local poolBtn = Instance.new("TextButton", farmsFrame)
poolBtn.Size = UDim2.new(0,120,0,28)
poolBtn.Position = UDim2.new(0,10,0,10)
poolBtn.Text = "Auto Pool: Off"
poolBtn.BackgroundColor3 = Color3.fromRGB(80,150,200)
poolBtn.TextColor3 = Color3.fromRGB(240,240,240)
poolBtn.Font = Enum.Font.GothamBold
poolBtn.TextSize = 14
Instance.new("UICorner", poolBtn).CornerRadius = UDim.new(0,8)
poolBtn.MouseButton1Click:Connect(function()
    autoPool = not autoPool
    poolBtn.Text = autoPool and "Auto Pool: On" or "Auto Pool: Off"
    hasTeleported = false
end)

-- Pool Selection Dropdown
local poolSelectBtn = Instance.new("TextButton", farmsFrame)
poolSelectBtn.Size = UDim2.new(0,120,0,28)
poolSelectBtn.Position = UDim2.new(0,140,0,10)
poolSelectBtn.Text = "Select Pool"
poolSelectBtn.BackgroundColor3 = Color3.fromRGB(120,120,120)
poolSelectBtn.TextColor3 = Color3.fromRGB(240,240,240)
poolSelectBtn.Font = Enum.Font.GothamBold
poolSelectBtn.TextSize = 14
Instance.new("UICorner", poolSelectBtn).CornerRadius = UDim.new(0,8)

local poolFrame = Instance.new("Frame", farmsFrame)
poolFrame.Size = UDim2.new(0,120,0,0)
poolFrame.Position = UDim2.new(0,140,0,38)
poolFrame.BackgroundColor3 = Color3.fromRGB(60,60,60)
poolFrame.Visible = false
Instance.new("UICorner", poolFrame).CornerRadius = UDim.new(0,6)

poolSelectBtn.MouseButton1Click:Connect(function()
    poolFrame.Visible = not poolFrame.Visible
end)

local yOff = 0
for name,_ in pairs(pools) do
    local btn = Instance.new("TextButton", poolFrame)
    btn.Size = UDim2.new(1,0,0,28)
    btn.Position = UDim2.new(0,0,0,yOff)
    btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(240,240,240)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
    btn.MouseButton1Click:Connect(function()
        selectedPool = name
        poolFrame.Visible = false
    end)
    yOff = yOff + 30
end

-- Auto Psychic Toggle
local psychicBtn = Instance.new("TextButton", farmsFrame)
psychicBtn.Size = UDim2.new(0,120,0,28)
psychicBtn.Position = UDim2.new(0,10,0,50)
psychicBtn.Text = "Auto Psychic: Off"
psychicBtn.BackgroundColor3 = Color3.fromRGB(180,50,180)
psychicBtn.TextColor3 = Color3.fromRGB(240,240,240)
psychicBtn.Font = Enum.Font.GothamBold
psychicBtn.TextSize = 14
Instance.new("UICorner", psychicBtn).CornerRadius = UDim.new(0,8)
psychicBtn.MouseButton1Click:Connect(function()
    autoPsychic = not autoPsychic
    psychicBtn.Text = autoPsychic and "Auto Psychic: On" or "Auto Psychic: Off"
end)

-- Psychic Selection Dropdown
local psychicSelectBtn = Instance.new("TextButton", farmsFrame)
psychicSelectBtn.Size = UDim2.new(0,120,0,28)
psychicSelectBtn.Position = UDim2.new(0,140,0,50)
psychicSelectBtn.Text = "Select Psychic"
psychicSelectBtn.BackgroundColor3 = Color3.fromRGB(120,120,120)
psychicSelectBtn.TextColor3 = Color3.fromRGB(240,240,240)
psychicSelectBtn.Font = Enum.Font.GothamBold
psychicSelectBtn.TextSize = 14
Instance.new("UICorner", psychicSelectBtn).CornerRadius = UDim.new(0,8)

local psychicFrame = Instance.new("Frame", farmsFrame)
psychicFrame.Size = UDim2.new(0,120,0,0)
psychicFrame.Position = UDim2.new(0,140,0,78)
psychicFrame.BackgroundColor3 = Color3.fromRGB(60,60,60)
psychicFrame.Visible = false
Instance.new("UICorner", psychicFrame).CornerRadius = UDim.new(0,6)

psychicSelectBtn.MouseButton1Click:Connect(function()
    psychicFrame.Visible = not psychicFrame.Visible
end)

local pY = 0
for name,_ in pairs(psychicLocations) do
    local btn = Instance.new("TextButton", psychicFrame)
    btn.Size = UDim2.new(1,0,0,28)
    btn.Position = UDim2.new(0,0,0,pY)
    btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(240,240,240)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
    btn.MouseButton1Click:Connect(function()
        selectedPsychic = name
        psychicFrame.Visible = false
    end)
    pY = pY + 30
end
-- Auto Strength Toggle
local strengthBtn = Instance.new("TextButton", farmsFrame)
strengthBtn.Size = UDim2.new(0,120,0,28)
strengthBtn.Position = UDim2.new(0,10,0,90)
strengthBtn.Text = "Auto Strength: Off"
strengthBtn.BackgroundColor3 = Color3.fromRGB(200,120,50)
strengthBtn.TextColor3 = Color3.fromRGB(240,240,240)
strengthBtn.Font = Enum.Font.GothamBold
strengthBtn.TextSize = 14
Instance.new("UICorner", strengthBtn).CornerRadius = UDim.new(0,8)
strengthBtn.MouseButton1Click:Connect(function()
    autoStrength = not autoStrength
    strengthBtn.Text = autoStrength and "Auto Strength: On" or "Auto Strength: Off"
    hasTeleStrengthTeleported = false
end)

-- Strength Selection Dropdown
local strengthSelectBtn = Instance.new("TextButton", farmsFrame)
strengthSelectBtn.Size = UDim2.new(0,120,0,28)
strengthSelectBtn.Position = UDim2.new(0,140,0,90)
strengthSelectBtn.Text = "Select Strength"
strengthSelectBtn.BackgroundColor3 = Color3.fromRGB(120,120,120)
strengthSelectBtn.TextColor3 = Color3.fromRGB(240,240,240)
strengthSelectBtn.Font = Enum.Font.GothamBold
strengthSelectBtn.TextSize = 14
Instance.new("UICorner", strengthSelectBtn).CornerRadius = UDim.new(0,8)

local strengthFrame = Instance.new("Frame", farmsFrame)
strengthFrame.Size = UDim2.new(0,120,0,0)
strengthFrame.Position = UDim2.new(0,140,0,118)
strengthFrame.BackgroundColor3 = Color3.fromRGB(60,60,60)
strengthFrame.Visible = false
Instance.new("UICorner", strengthFrame).CornerRadius = UDim.new(0,6)

strengthSelectBtn.MouseButton1Click:Connect(function()
    strengthFrame.Visible = not strengthFrame.Visible
end)

local sY = 0
for name,pos in pairs(strengthLocations) do
    local btn = Instance.new("TextButton", strengthFrame)
    btn.Size = UDim2.new(1,0,0,28)
    btn.Position = UDim2.new(0,0,0,sY)
    btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(240,240,240)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
    btn.MouseButton1Click:Connect(function()
        selectedStrength = pos
        strengthFrame.Visible = false
    end)
    sY = sY + 30
end

-- Discord Button
local discordBtn = Instance.new("TextButton", farmsFrame)
discordBtn.Size = UDim2.new(0,120,0,28)
discordBtn.Position = UDim2.new(0,10,0,130)
discordBtn.BackgroundColor3 = Color3.fromRGB(80,80,220)
discordBtn.Text = "Discord"
discordBtn.TextColor3 = Color3.fromRGB(240,240,240)
discordBtn.Font = Enum.Font.GothamBold
discordBtn.TextSize = 14
Instance.new("UICorner", discordBtn).CornerRadius = UDim.new(0,8)
discordBtn.MouseButton1Click:Connect(function()
    if setclipboard then setclipboard("https://discord.gg/xwUDTAKFK5") end
end)

-- AUTO PSYCHIC HANDLER
task.spawn(function()
    while true do
        local char = Player.Character
        local backpack = Player:FindFirstChild("Backpack")
        if autoPsychic and char and backpack then
            local items = backpack:GetChildren()
            local equipped = char:FindFirstChildOfClass("Tool")
            if items[3] and items[3]:IsA("Tool") and equipped ~= items[3] then
                items[3].Parent = char
            end
            if items[3] and not char:FindFirstChild(items[3].Name) then
                items[3].Parent = char
            end
            if char:FindFirstChild("HumanoidRootPart") then
                char.HumanoidRootPart.CFrame = CFrame.new(psychicLocations[selectedPsychic])
            end
        end
        task.wait(0.5)
    end
end)

-- AUTO STRENGTH LOOP
task.spawn(function()
    while true do
        if autoStrength and selectedStrength then
            local char = Player.Character
            if char and char:FindFirstChild("HumanoidRootPart") then
                char.HumanoidRootPart.CFrame = CFrame.new(selectedStrength)
                local args = {[1] = {[1] = "Add_FS_Request"}}
                ReplicatedStorage.RemoteEvent:FireServer(unpack(args))
                VirtualInputManager:SendMouseButtonEvent(clickPosition.X, clickPosition.Y,0,true,game,1)
                VirtualInputManager:SendMouseButtonEvent(clickPosition.X, clickPosition.Y,0,false,game,1)
            end
        else
            hasTeleStrengthTeleported = false
        end
        task.wait(0.1)
    end
end)

-- SPAWN / DEATH HANDLER
local function setupDeathHandler()
    local function connectDied()
        local char = Player.Character
        if char then
            local hum = char:FindFirstChildOfClass("Humanoid")
            if hum then
                hum.Died:Connect(function()
                    hasTeleported = false
                    hasTeleStrengthTeleported = false
                    task.wait(1)
                    Player.CharacterAdded:Wait()
                    task.wait(0.5)
                    local char = Player.Character
                    if char and char:FindFirstChild("HumanoidRootPart") then
                        char.HumanoidRootPart.CFrame = CFrame.new(pools[selectedPool])
                    end
                end)
            end
        end
    end
    Player.CharacterAdded:Connect(function()
        task.wait(0.5)
        connectDied()
    end)
    connectDied()
end
setupDeathHandler()

-- AUTO POOL & RESPAWN BYPASS LOOP
task.spawn(function()
    while true do
        local char = Player.Character
        if char and char:FindFirstChild("Humanoid") then
            local hum = char.Humanoid
            if hum.Health <= hum.MaxHealth * 0.6 then
                momentorespawn = true
            end
            if momentorespawn then
                char:Remove()
                task.wait(0.1)
                ReplicatedStorage.RemoteEvent:FireServer({"Respawn"})
                task.wait(0.1)
                momentorespawn = false
            end
        end
        if autoPool and not hasTeleported then
            local char = Player.Character
            if char and char:FindFirstChild("HumanoidRootPart") then
                char.HumanoidRootPart.CFrame = CFrame.new(pools[selectedPool])
                hasTeleported = true
            end
        end
        task.wait(0.4)
    end
end)
