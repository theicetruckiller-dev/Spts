-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")

local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- GUI ROOT
local gui = Instance.new("ScreenGui")
gui.Name = "SPTSAutoFull"
gui.ResetOnSpawn = false
gui.Parent = PlayerGui

-- PANEL
local panel = Instance.new("Frame", gui)
panel.Size = UDim2.new(0, 340, 0, 360)
panel.Position = UDim2.new(0.05, 0, 0.3, 0)
panel.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
panel.Active = true
panel.Draggable = true
Instance.new("UICorner", panel).CornerRadius = UDim.new(0, 12)

-- TOGGLE BUTTON
local toggleBtn = Instance.new("TextButton", gui)
toggleBtn.Size = UDim2.new(0, 50, 0, 50)
toggleBtn.Position = UDim2.new(0.01, 0, 0.3, 0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
toggleBtn.Text = "👁️"
toggleBtn.TextColor3 = Color3.fromRGB(230, 230, 230)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 26
toggleBtn.Active = true
toggleBtn.Draggable = true
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(1, 0)

local panelVisible = true
toggleBtn.MouseButton1Click:Connect(function()
    panelVisible = not panelVisible
    panel.Visible = panelVisible
    toggleBtn.Text = panelVisible and "👁️" or "❌"
end)

-- TITLE
local title = Instance.new("TextLabel", panel)
title.Text = "⚡ SPTS Auto Full (by Zwac)"
title.Size = UDim2.new(1, 0, 0, 28)
title.Position = UDim2.new(0, 0, 0, 2)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(230, 230, 230)
title.Font = Enum.Font.GothamBold
title.TextSize = 18

-- CLICKER BUTTON
local clickerBtn = Instance.new("TextButton", panel)
clickerBtn.Size = UDim2.new(0, 150, 0, 32)
clickerBtn.Position = UDim2.new(0, 10, 0, 40)
clickerBtn.BackgroundColor3 = Color3.fromRGB(40, 180, 100)
clickerBtn.Text = "Clicker: Off"
clickerBtn.TextColor3 = Color3.fromRGB(240, 240, 240)
clickerBtn.Font = Enum.Font.GothamBold
clickerBtn.TextSize = 14
Instance.new("UICorner", clickerBtn).CornerRadius = UDim.new(0, 8)

-- CLICK POSITION INPUT
local xBox = Instance.new("TextBox", panel)
xBox.Size = UDim2.new(0, 60, 0, 26)
xBox.Position = UDim2.new(0, 10, 0, 90)
xBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
xBox.Text = "401"
xBox.TextColor3 = Color3.fromRGB(220, 220, 220)
xBox.Font = Enum.Font.Gotham
xBox.TextSize = 14
xBox.ClearTextOnFocus = false
Instance.new("UICorner", xBox).CornerRadius = UDim.new(0, 6)

local yBox = Instance.new("TextBox", panel)
yBox.Size = UDim2.new(0, 60, 0, 26)
yBox.Position = UDim2.new(0, 80, 0, 90)
yBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
yBox.Text = "293"
yBox.TextColor3 = Color3.fromRGB(220, 220, 220)
yBox.Font = Enum.Font.Gotham
yBox.TextSize = 14
yBox.ClearTextOnFocus = false
Instance.new("UICorner", yBox).CornerRadius = UDim.new(0, 6)

local saveBtn = Instance.new("TextButton", panel)
saveBtn.Size = UDim2.new(0, 100, 0, 26)
saveBtn.Position = UDim2.new(0, 150, 0, 90)
saveBtn.BackgroundColor3 = Color3.fromRGB(100, 180, 220)
saveBtn.Text = "Save Pos"
saveBtn.TextColor3 = Color3.fromRGB(240, 240, 240)
saveBtn.Font = Enum.Font.GothamBold
saveBtn.TextSize = 14
Instance.new("UICorner", saveBtn).CornerRadius = UDim.new(0, 6)

local clickPosition = Vector2.new(tonumber(xBox.Text), tonumber(yBox.Text))
local clickerActive = false
local saved = false

clickerBtn.MouseButton1Click:Connect(function()
    clickerActive = not clickerActive
    clickerBtn.Text = clickerActive and "Clicker: On" or "Clicker: Off"
end)

saveBtn.MouseButton1Click:Connect(function()
    clickPosition = Vector2.new(tonumber(xBox.Text), tonumber(yBox.Text))
    saved = true
end)

-- AUTO POOL
local pools = {
    Vector3.new(366, 250, -446),
    Vector3.new(348, 264, -499),
    Vector3.new(1639, 260, 2250),
    Vector3.new(-2303, 977, 1072),
    Vector3.new(-2051, 714, -1893)
}
local selectedPool = 1
local autoPool = false
local hasTeleported = false

local poolBtns = {}
for i = 1, #pools do
    local b = Instance.new("TextButton", panel)
    b.Size = UDim2.new(0, 50, 0, 26)
    b.Position = UDim2.new(0, 10 + 60 * (i - 1), 0, 150)
    b.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    b.TextColor3 = i == 1 and Color3.fromRGB(100, 170, 255) or Color3.fromRGB(230, 230, 230)
    b.Font = Enum.Font.GothamBold
    b.TextSize = 14
    b.Text = "Pool " .. i
    Instance.new("UICorner", b).CornerRadius = UDim.new(0, 6)
    b.MouseButton1Click:Connect(function()
        selectedPool = i
        for j, btn in ipairs(poolBtns) do
            btn.TextColor3 = j == i and Color3.fromRGB(100, 170, 255) or Color3.fromRGB(230, 230, 230)
        end
    end)
    table.insert(poolBtns, b)
end

local autoPoolBtn = Instance.new("TextButton", panel)
autoPoolBtn.Size = UDim2.new(0, 150, 0, 28)
autoPoolBtn.Position = UDim2.new(0, 10, 0, 200)
autoPoolBtn.BackgroundColor3 = Color3.fromRGB(200, 120, 50)
autoPoolBtn.Text = "Auto Pool: Off"
autoPoolBtn.TextColor3 = Color3.fromRGB(240, 240, 240)
autoPoolBtn.Font = Enum.Font.GothamBold
autoPoolBtn.TextSize = 14
Instance.new("UICorner", autoPoolBtn).CornerRadius = UDim.new(0, 8)

autoPoolBtn.MouseButton1Click:Connect(function()
    autoPool = not autoPool
    autoPoolBtn.Text = autoPool and "Auto Pool: On" or "Auto Pool: Off"
    hasTeleported = false
end)

-- DISCORD BUTTON
local discordBtn = Instance.new("TextButton", panel)
discordBtn.Size = UDim2.new(0, 150, 0, 28)
discordBtn.Position = UDim2.new(0, 10, 0, 250)
discordBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 220)
discordBtn.Text = "Discord"
discordBtn.TextColor3 = Color3.fromRGB(240, 240, 240)
discordBtn.Font = Enum.Font.GothamBold
discordBtn.TextSize = 14
Instance.new("UICorner", discordBtn).CornerRadius = UDim.new(0, 8)
discordBtn.MouseButton1Click:Connect(function()
    if setclipboard then setclipboard("https://discord.gg/xwUDTAKFK5") end
end)

-- CLICK LOOP
task.spawn(function()
    while true do
        if clickerActive and saved then
            VirtualInputManager:SendMouseButtonEvent(
                clickPosition.X,
                clickPosition.Y,
                0,
                true,
                game,
                1
            )
            VirtualInputManager:SendMouseButtonEvent(
                clickPosition.X,
                clickPosition.Y,
                0,
                false,
                game,
                1
            )
            task.wait(0.05)
        else
            task.wait(0.1)
        end
    end
end)

-- AUTO POOL LOOP
local function doTeleport()
    local char = Player.Character
    if char and char:FindFirstChild("HumanoidRootPart") and autoPool then
        char.HumanoidRootPart.CFrame = CFrame.new(pools[selectedPool])
        hasTeleported = true
    end
end

RunService.RenderStepped:Connect(function()
    local char = Player.Character
    if char and char:FindFirstChild("HumanoidRootPart") and autoPool then
        local pos = char.HumanoidRootPart.Position
        if lastPos and (pos - lastPos).Magnitude > 1 then
            hasTeleported = false
        end
        lastPos = pos
    end
end)

task.spawn(function()
    while true do
        if autoPool and not hasTeleported then
            doTeleport()
        end
        task.wait(0.4)
    end
end)

-- DEATH / RESPAWN
local function setupDeathHandler()
    local function connectDied()
        local char = Player.Character
        if char then
            local hum = char:FindFirstChildOfClass("Humanoid")
            if hum then
                hum.Died:Connect(function()
                    hasTeleported = false
                    task.wait(1)
                    Player.CharacterAdded:Wait()
                    task.wait(0.5)
                    doTeleport()
                end)
            end
        end
    end
    Player.CharacterAdded:Connect(function()
        task.wait(0.5)
        connectDied()
    end)
    connectDied()
end
setupDeathHandler()
