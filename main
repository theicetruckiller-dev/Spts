local Players=game:GetService("Players")
local RunService=game:GetService("RunService")
local VirtualInputManager=game:GetService("VirtualInputManager")
local p=Players.LocalPlayer

-- GUI
local gui=Instance.new("ScreenGui")
gui.Name="SPTSAuto"
gui.ResetOnSpawn=false
gui.Parent=p:WaitForChild("PlayerGui")

local panel=Instance.new("Frame")
panel.Size=UDim2.new(0,300,0,270)
panel.Position=UDim2.new(0.05,0,0.55,0)
panel.BackgroundColor3=Color3.fromRGB(25,25,25)
panel.Active=true
panel.Draggable=true
panel.Parent=gui
Instance.new("UICorner",panel).CornerRadius=UDim.new(0,12)

-- Toggle GUI
local toggleBtn=Instance.new("TextButton")
toggleBtn.Size=UDim2.new(0,50,0,50)
toggleBtn.Position=UDim2.new(0.01,0,0.5,0)
toggleBtn.BackgroundColor3=Color3.fromRGB(40,40,40)
toggleBtn.Text="👁️"
toggleBtn.TextColor3=Color3.fromRGB(230,230,230)
toggleBtn.Font=Enum.Font.GothamBold
toggleBtn.TextSize=26
toggleBtn.Active=true
toggleBtn.Draggable=true
toggleBtn.Parent=gui
Instance.new("UICorner",toggleBtn).CornerRadius=UDim.new(1,0)

local panelVisible=true
toggleBtn.MouseButton1Click:Connect(function()
 panelVisible=not panelVisible
 panel.Visible=panelVisible
 toggleBtn.Text=panelVisible and "👁️" or "❌"
end)

-- Başlık
local title=Instance.new("TextLabel")
title.Text="⚡ SPTS Auto"
title.Size=UDim2.new(1,0,0,28)
title.Position=UDim2.new(0,0,0,2)
title.BackgroundTransparency=1
title.TextColor3=Color3.fromRGB(230,230,230)
title.Font=Enum.Font.GothamBold
title.TextSize=18
title.Parent=panel

-- Clicker
local clickerBtn=Instance.new("TextButton")
clickerBtn.Size=UDim2.new(0,120,0,32)
clickerBtn.Position=UDim2.new(0,10,0,40)
clickerBtn.BackgroundColor3=Color3.fromRGB(40,180,100)
clickerBtn.Text="Clicker: Kapalı"
clickerBtn.TextColor3=Color3.fromRGB(240,240,240)
clickerBtn.Font=Enum.Font.GothamBold
clickerBtn.TextSize=14
clickerBtn.Parent=panel
Instance.new("UICorner",clickerBtn).CornerRadius=UDim.new(0,8)

-- Hız
local speedBox=Instance.new("TextBox")
speedBox.Size=UDim2.new(0,60,0,26)
speedBox.Position=UDim2.new(0,10,0,90)
speedBox.BackgroundColor3=Color3.fromRGB(40,40,40)
speedBox.Text="100"
speedBox.TextColor3=Color3.fromRGB(220,220,220)
speedBox.Font=Enum.Font.Gotham
speedBox.TextSize=14
speedBox.ClearTextOnFocus=false
speedBox.Parent=panel
Instance.new("UICorner",speedBox).CornerRadius=UDim.new(0,6)

-- Infinite Jump
local jumpBtn=Instance.new("TextButton")
jumpBtn.Size=UDim2.new(0,250,0,30)
jumpBtn.Position=UDim2.new(0,10,0,150)
jumpBtn.BackgroundColor3=Color3.fromRGB(80,70,180)
jumpBtn.Text="Infinite Jump: Kapalı"
jumpBtn.TextColor3=Color3.fromRGB(240,240,255)
jumpBtn.Font=Enum.Font.GothamBold
jumpBtn.TextSize=14
jumpBtn.Parent=panel
Instance.new("UICorner",jumpBtn).CornerRadius=UDim.new(0,8)

-- Havuz
local pools={
 Vector3.new(366,250,-446),
 Vector3.new(348,264,-499),
 Vector3.new(1639,260,2250),
 Vector3.new(-2303,977,1072),
 Vector3.new(-2051,714,-1893)
}
local poolBox=Instance.new("TextBox")
poolBox.Size=UDim2.new(0,60,0,26)
poolBox.Position=UDim2.new(0,130,0,188)
poolBox.BackgroundColor3=Color3.fromRGB(40,40,40)
poolBox.Text="1"
poolBox.TextColor3=Color3.fromRGB(220,220,220)
poolBox.Font=Enum.Font.Gotham
poolBox.TextSize=14
poolBox.ClearTextOnFocus=false
poolBox.Parent=panel
Instance.new("UICorner",poolBox).CornerRadius=UDim.new(0,6)

local autoPoolBtn=Instance.new("TextButton")
autoPoolBtn.Size=UDim2.new(0,150,0,28)
autoPoolBtn.Position=UDim2.new(0,10,0,220)
autoPoolBtn.BackgroundColor3=Color3.fromRGB(200,120,50)
autoPoolBtn.Text="Auto Havuz: Kapalı"
autoPoolBtn.TextColor3=Color3.fromRGB(240,240,240)
autoPoolBtn.Font=Enum.Font.GothamBold
autoPoolBtn.TextSize=14
autoPoolBtn.Parent=panel
Instance.new("UICorner",autoPoolBtn).CornerRadius=UDim.new(0,8)

-- Vars
local running=false
local infiniteJump=false
local autoPool=false
local currentSpeed=100

clickerBtn.MouseButton1Click:Connect(function()
 running=not running
 clickerBtn.Text=running and "Clicker: Açık" or "Clicker: Kapalı"
 clickerBtn.BackgroundColor3=running and Color3.fromRGB(200,80,80) or Color3.fromRGB(40,180,100)
end)

jumpBtn.MouseButton1Click:Connect(function()
 infiniteJump=not infiniteJump
 jumpBtn.Text=infiniteJump and "Infinite Jump: Açık" or "Infinite Jump: Kapalı"
end)

autoPoolBtn.MouseButton1Click:Connect(function()
 autoPool=not autoPool
 autoPoolBtn.Text=autoPool and "Auto Havuz: Açık" or "Auto Havuz: Kapalı"
end)

-- Auto clicker loop
task.spawn(function()
 while true do
  if running then
   local spd=tonumber(speedBox.Text) or currentSpeed
   local x=workspace.CurrentCamera.ViewportSize.X/2
   local y=workspace.CurrentCamera.ViewportSize.Y/2
   VirtualInputManager:SendMouseButtonEvent(x,y,0,true,game,1)
   VirtualInputManager:SendMouseButtonEvent(x,y,0,false,game,1)
   task.wait(math.max(spd/1000,0.01))
  else task.wait(0.1) end
 end
end)

-- Infinite Jump
local lastJump=tick()
RunService.RenderStepped:Connect(function()
 if infiniteJump then
  local char=p.Character
  if char and char:FindFirstChildOfClass("Humanoid") then
   local hum=char:FindFirstChildOfClass("Humanoid")
   if hum:GetState()==Enum.HumanoidStateType.Landed then
    if tick()-lastJump>0.08 then
     hum:ChangeState(Enum.HumanoidStateType.Jumping)
     lastJump=tick()
    end
   end
  end
 end
end)

-- Auto Havuz / Spawn sonrası ışınlama
local function startAutoPool(char)
 task.spawn(function()
  while autoPool and char and char:FindFirstChild("HumanoidRootPart") do
   local poolNum=math.clamp(tonumber(poolBox.Text) or 1,1,#pools)
   char.HumanoidRootPart.CFrame=CFrame.new(pools[poolNum])
   task.wait(1)
  end
 end)
end

-- Spawn ekranı geldiğinde otomatik Respawn
local function autoRespawn()
    local CoreMenu=CoreGui:WaitForChild("TopBarApp"):WaitForChild("TopBarApp"):WaitForChild("GamepadMenu"):WaitForChild("Menu")
    local respawnBtn=CoreMenu:FindFirstChild("Respawn")
    if respawnBtn then
        respawnBtn:Activate()
    end
end

-- Karakter spawn sonrası ışınlama + spawn ekranı
p.CharacterAdded:Connect(function(char)
    char:WaitForChild("HumanoidRootPart")
    autoRespawn()
    if autoPool then startAutoPool(char) end
end)

if p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
    startAutoPool(p.Character)
end
